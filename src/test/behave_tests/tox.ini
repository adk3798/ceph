[tox]
envlist = behave, mypy, flake8
skipsdist = true

[base]
setenv =
    HOME = {homedir}
    PWD = {toxinidir}

[flake8]
max-line-length = 110
exclude =
  .tox
  .mypy_cache

[testenv:behave]
setenv =
    {[base]setenv}
deps =
   behave
   Jinja2
# run the behave tests
commands = behave

[testenv:mypy]
deps =
  mypy
  Jinja2
  behave
setenv =
    MYPYPATH = {toxinidir}/..
passenv =
    MYPYPATH
basepython = python3
mypy_args = features/
commands =
    mypy {[testenv:mypy]mypy_args}
    mypy --python-version 3.9 {[testenv:mypy]mypy_args}

[testenv:flake8]
deps =
    flake8==3.9.2
commands = flake8 --statistics {posargs} features/